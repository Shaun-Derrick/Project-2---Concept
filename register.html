<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>
</head>
<body>
  <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  Register
</button>
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          ...<form method="post">
  
            <div class='container'>
              <label for="firstname"><b>First Name</b></label>
              <input type='text' placeholder='Enter First Name' name='firstname' required>
          
              <label for='lastname'><b>Last Name</b></label>
              <input type='text' placeholder='Enter Last Name' name='lastname' required>
          
              <label for="email"><b>Email</b></label>
              <input type='text' placeholder='Enter email' name='email' id='email' required>
          
              <label for='psw'><b>Password</b></label>
              <input type='password' placeholder='Enter Password' name='psw' id='password' required>
          
              <button type="submit">Register</button>
             
            </div>
          
            <div class='container' style="background-color:#f1f1f1">
              <button type='button' class='cancelbtn'>Cancel</button>
          
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script>
  const form = document.querySelector('form')
form.addEventListener('submit', async (e) => {
  e.preventDefault()
  const firstname = form.firstname.value
  const lastname = form.lastname.value
  const email = form.email.value
  const password = form.password.value
  try {
    const res = await fetch('http://localhost:5000/api/user/register', {
      method: 'post',
      body: JSON.stringify({ firstname, lastname, email, password }),
      headers: { 'Content-Type': 'application/json' },
    })
    const data = await res.json()
  console.log(data)
  if (data.user) {
      location.assign('/scan.html')
    }
  } 
  catch (err) {
    console.log(err)
  }
})
</script>
</body>
</html>